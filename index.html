<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz for Exam </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .quiz-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .option-btn {
            transition: all 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            line-height: 1.5;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
            color: #065f46;
        }
        .incorrect {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #991b1b;
        }
        .selected {
            background-color: #e0f2fe;
            border-color: #38bdf8;
        }
        .question-nav-btn {
            transition: all 0.2s ease-in-out;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        .question-nav-btn.active {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        .question-nav-btn.answered-correct {
            background-color: #bfdbfe; /* Tailwind blue-200 */
            border-color: #60a5fa; /* Tailwind blue-400 */
            color: #1e40af; /* Tailwind blue-800 */
        }
        .question-nav-btn.answered-incorrect {
            background-color: #fecaca; /* Tailwind red-200 */
            border-color: #f87171; /* Tailwind red-400 */
            color: #991b1b; /* Tailwind red-900 */
        }
        .question-nav-btn:hover:not(.active) {
            background-color: #f3f4f6;
        }
        /* Styles for Edit Mode */
        .edit-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            margin-top: 4px;
        }
        .edit-label {
            font-weight: 500;
            color: #374151;
            margin-top: 12px;
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen py-8">

    <div id="quiz-container" class="quiz-container w-full">
        
        <div class="text-center mb-8 relative">
            <h1 class="text-3xl font-bold text-gray-800">Quiz for Exam </h1>
            <p id="quiz-subtitle" class="text-gray-500 mt-2">Subject: VONG DANY</p>
            <p class="text-gray-500">Lecturer: Bacterie</p>
            <div class="absolute top-0 left-0 flex gap-2">
                <button id="practice-sheet-btn" class="bg-blue-100 text-blue-700 font-semibold py-2 px-4 rounded-lg hover:bg-blue-200 text-sm">Practice Sheet</button>
                <button id="show-all-btn" class="bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200 text-sm">Show Answers</button>
            </div>
            <button id="edit-quiz-btn" class="absolute top-0 right-0 bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 text-sm">Edit Quiz</button>
        </div>

        <div class="text-center mb-6">
            <div class="inline-flex rounded-md shadow-sm flex-wrap justify-center" role="group">
                <button id="part1-btn" type="button" class="py-2 px-6 text-sm font-medium text-white bg-indigo-600 rounded-l-lg border border-gray-200 hover:bg-indigo-700 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 1
                </button>
                <button id="part2-btn" type="button" class="py-2 px-6 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 2
                </button>
                 <button id="part3-btn" type="button" class="py-2 px-6 text-sm font-medium text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 3
                </button>
                <button id="part4-btn" type="button" class="py-2 px-6 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 4
                </button>
                <button id="part5-btn" type="button" class="py-2 px-6 text-sm font-medium text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 5
                </button>
                <button id="part6-btn" type="button" class="py-2 px-6 text-sm font-medium text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 6
                </button>
                <button id="part7-btn" type="button" class="py-2 px-6 text-sm font-medium text-gray-900 bg-white rounded-r-md border border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-indigo-500">
                    Part 7
                </button>
            </div>
        </div>


        <div id="quiz-view">
            <div class="flex justify-between items-center mb-4">
                 <div id="main-score-text" class="text-lg font-bold text-indigo-600"></div>
                 <button id="redo-part-btn" class="bg-orange-100 text-orange-700 font-semibold py-2 px-4 rounded-lg hover:bg-orange-200 text-sm">Redo Part</button>
            </div>
            <div id="question-navigation" class="flex flex-wrap justify-center gap-2 mb-6">
                <!-- Question number buttons will be dynamically inserted here -->
            </div>

            <div id="question-area" class="mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="question-number" class="text-xl font-semibold text-gray-700"></h2>
                   
                </div>
                <div id="question-text" class="text-lg text-gray-800 leading-relaxed"></div>
            </div>

            <div id="answer-area" class="grid grid-cols-1 md-grid-cols-2 gap-4">
                <!-- Options will be dynamically inserted here -->
            </div>

            <div id="feedback-area" class="mt-6 text-center text-lg font-medium"></div>

            <div class="mt-6 text-center">
                <button id="redo-btn" class="hidden bg-yellow-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-yellow-600 transition-colors duration-300 shadow-lg">
                    Redo Question
                </button>
            </div>

            <div class="mt-4 flex justify-between items-center">
                <button id="prev-btn" class="bg-gray-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-600 transition-colors duration-300 shadow-lg hidden">
                    <span class="font-semibold">&larr; Previous</span>
                </button>
                <button id="next-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-lg hidden ml-auto">
                    <span class="font-semibold">Next Question</span>
                </button>
            </div>

            <div id="results-area" class="hidden text-center">
                <div class="mb-4">
                    <h2 class="text-4xl font-extrabold text-gray-800">Quiz Complete!</h2>
                </div>
                <p id="results-score" class="text-2xl text-gray-600 mb-6"></p>
                <div id="summary" class="text-left mt-8 bg-gray-50 p-6 rounded-lg">
                    <div class="text-center">
                        <h3 class="text-xl font-bold text-gray-700">Review Your Answers:</h3>
                    </div>
                </div>
                <button id="restart-btn" class="mt-8 bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-lg">
                    <span class="font-semibold">Play Again</span>
                </button>
            </div>
        </div>

        <div id="practice-sheet-view" class="hidden">
            <!-- Content generated by JS -->
        </div>

        <div id="all-questions-view" class="hidden">
            <!-- Content for showing all answers -->
        </div>

        <div id="edit-view" class="hidden">
            <h2 class="text-2xl font-bold text-center mb-6">Edit Quiz Questions</h2>
            <div id="edit-question-navigation" class="flex flex-wrap justify-center gap-2 mb-6">
                <!-- Edit mode question number buttons will be dynamically inserted here -->
            </div>
            <div id="edit-questions-container"></div>
            <div class="flex justify-between items-start mt-8">
                <button id="add-question-btn" class="bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700">Add Question</button>
                <div>
                    <button id="cancel-edit-btn" class="bg-gray-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-600 mr-4">Cancel</button>
                    <button id="apply-preview-btn" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700">Apply to Preview</button>
                    <button id="generate-save-code-btn" class="bg-purple-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-purple-700 ml-4">Generate Save Code</button>
                </div>
            </div>
            <div id="export-area" class="hidden mt-6 p-4 border-2 border-dashed border-purple-400 rounded-lg bg-purple-50">
                <h3 class="text-lg font-semibold text-purple-800">How to Save Your Changes Permanently</h3>
                <ol class="list-decimal list-inside text-gray-700 space-y-2 mt-2">
                    <li>All the code for your updated quiz is in the text box below.</li>
                    <li>Click anywhere in the box to automatically copy all the code.</li>
                    <li>Paste the copied code in a new message and send it to me.</li>
                    <li>I will then update the file for you with your permanent changes.</li>
                </ol>
                <textarea id="export-output" readonly class="w-full h-64 p-2 border rounded-md bg-gray-100 font-mono text-sm focus:ring-2 focus:ring-indigo-500 mt-4 cursor-pointer"></textarea>
                <p id="copy-feedback" class="text-purple-700 font-medium text-sm mt-2 h-4"></p>
            </div>
        </div>
    </div>

    <script>
        // --- Question Data Injected Below ---

        let quizDataPart1 = [
            { number: 1, type: 'mcq', question: { en: "Which of the following is not a genus of Enterobactericeae?" }, options: { en: ["Shigella spp", "Salmonella spp", "Serratia spp", "Staphylococcus spp"] }, answer: { en: "Staphylococcus spp" } },
            { number: 2, type: 'mcq', question: { en: "All these species are in familly Enterobactericeae, except:" }, options: { en: ["Citrobacter", "Enterobacter", "Enterococcus", "Escherichia"] }, answer: { en: "Enterococcus" } },
            { number: 3, type: 'mcq', question: { en: "Which of the following bacteria is a genus of Enterobactericeae?" }, options: { en: ["Klebsiella", "Enterococcus", "Neisseria", "Mycoplasma"] }, answer: { en: "Klebsiella" } },
            { number: 4, type: 'mcq', question: { en: "True about Enterobactericeae is all, except:" }, options: { en: ["Normal or pathological bacteria of digestive tract", "Some group proliferate in environmental", "Some species are opportunistic pathogens", "Some are commensal on skin"] }, answer: { en: "Some are commensal on skin" } },
            { number: 5, type: 'mcq', question: { en: "Which of the following bacteria is not a most common bacterial pathogen causing diarrhea?" }, options: { en: ["Shigella spp", "Salmonella spp", "Staphylococcus aureus", "Campylobacter"] }, answer: { en: "Staphylococcus aureus" } },
            { number: 6, type: 'mcq', question: { en: "Which of the following bacteria is rarely associated with Urinary Tract Infection?" }, options: { en: ["E.coli", "Enterobacter spp", "Proteus spp", "Shigella spp"] }, answer: { en: "Shigella spp" } },
            { number: 7, type: 'mcq', question: { en: "Which of the following Gram negative rod is not a blood borne bacterial pathogen?" }, options: { en: ["Shigella spp", "Escherichia Coli", "Klebsiella pneumoniae", "Pseudomonas aeruginosa"] }, answer: { en: "Shigella spp" } },
            { number: 8, type: 'mcq', question: { en: "Stool Culture is primarily recommended when the complaint is:" }, options: { en: ["Bloody diarrhea(dysentery, enterocolitis)", "Watery diarrhea", "For both bloody and watery diarrhea", "an indication of anaerobic infection"] }, answer: { en: "Bloody diarrhea(dysentery, enterocolitis)" } },
            { number: 9, type: 'mcq', question: { en: "Which of the following are reservoirs for humans infection?" }, options: { en: ["Food and water", "humans", "animals", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 10, type: 'mcq', question: { en: "Enterobactericeae has respirotory type:" }, options: { en: ["Aerobic strict", "Aeroanaerobic facultatif", "Anaerobic strict", "Microaerophilic"] }, answer: { en: "Aeroanaerobic facultatif" } },
            { number: 11, type: 'mcq', question: { en: "The vast majority of Enterobactericeae have Flagellar:" }, options: { en: ["Peritrichous", "monotrichous", "amphitrichous", "lophotrichous"] }, answer: { en: "Peritrichous" } },
            { number: 12, type: 'mcq', question: { en: "Which of the following bacteria is immotile(no flagellar)?" }, options: { en: ["Klebsiella", "Salmonella typhy", "Vibrio cholerae", "Escherichia"] }, answer: { en: "Klebsiella" } },
            { number: 13, type: 'mcq', question: { en: "The optimum growth temperature of Enterobactericea is:" }, options: { en: ["25 oC", "30 oC", "37 oC", "40 oC"] }, answer: { en: "37 oC" } },
            { number: 14, type: 'mcq', question: { en: "Enterobactericeae growth on ordinary media after:" }, options: { en: ["18-24 hours", "37 hours", "48 hours", "72 hours"] }, answer: { en: "18-24 hours" } },
            { number: 15, type: 'mcq', question: { en: "Which of the following is not a general caracteristic of Enterobactericeae?" }, options: { en: ["Gram negative bacilli", "Oxydase positive", "fermenter glucose", "Aero-anaerobic facultative"] }, answer: { en: "Oxydase positive" } },
            { number: 16, type: 'mcq', question: { en: "All are true about species of Salmonella , except:" }, options: { en: ["Salmonella typhi", "Salmonella enteritidis", "Salmonella cholerae-suis", "Salmonella dysenteriae"] }, answer: { en: "Salmonella dysenteriae" } },
            { number: 17, type: 'mcq', question: { en: "Not true of Salmonella is that:" }, options: { en: ["It is included in the family Enterobactericeae", "Oxydase negative", "Catalase positive", "Strict anaerobic"] }, answer: { en: "Strict anaerobic" } },
            { number: 18, type: 'mcq', question: { en: "Major antigens possess by Salmonella :" }, options: { en: ["Antigen O", "Antigen H", "Antigen Vi", "All of the above"] }, answer: { en: "All of the above" } },
            { number: 19, type: 'mcq', question: { en: "The caracteristic of Salmonella:" }, options: { en: ["Motile", "Fermenting lactose", "Produce H2S", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 20, type: 'mcq', question: { en: "True about the caracteristic of Shigella, is all, except:" }, options: { en: ["Gram negative bacilli", "Non motile", "fermenter lactose", "Fermenter glucose with production of acid but not gas"] }, answer: { en: "fermenter lactose" } },
            { number: 21, type: 'mcq', question: { en: "Which of the following is not a symptom cause by Shigella?" }, options: { en: ["Meningitis", "abdominal pain", "diarrhea", "Nausea and vomiting"] }, answer: { en: "Meningitis" } },
            { number: 22, type: 'mcq', question: { en: "Which of the following is not a type of specimen for Shigella ?" }, options: { en: ["anal swab", "urine", "stool", "rectal swab"] }, answer: { en: "urine" } },
            { number: 23, type: 'mcq', question: { en: "True about the important part of specimen stool that we should steak or collect for culture Shigella, is all, except:" }, options: { en: ["Blood", "mucus", "food excremen", "pus"] }, answer: { en: "food excremen" } },
            { number: 24, type: 'mcq', question: { en: "Which of the following is a stool transport medium?" }, options: { en: ["Cary-blair", "Mueller hinton", "Blood agar", "chorcolate agar"] }, answer: { en: "Cary-blair" } },
            { number: 25, type: 'mcq', question: { en: "In stool culture, the hight selective media for Shigella spp is:" }, options: { en: ["MacConkey agar", "SS agar", "Xylose lysine desoxycholate agar", "Eosin methylene blue"] }, answer: { en: "Xylose lysine desoxycholate agar" } },
            { number: 26, type: 'mcq', question: { en: "In stool culture, the moderately selective media for Shigella spp is:" }, options: { en: ["MacConkey agar", "SS agar", "Xylose lysine desoxycholate agar", "Eosin methylene blue"] }, answer: { en: "SS agar" } },
            { number: 27, type: 'mcq', question: { en: "In stool culture, the low selective media for Shigella spp is:" }, options: { en: ["MacConkey agar", "SS agar", "Xylose lysine desoxycholate agar", "Hektoen enteric agar"] }, answer: { en: "MacConkey agar" } },
            { number: 28, type: 'mcq', question: { en: "In stool culture, Which of the following is not a selective media for Shigella spp?" }, options: { en: ["MacConkey agar", "SS agar", "Xylose lysine desoxycholate agar", "Chapman agar"] }, answer: { en: "Chapman agar" } },
            { number: 29, type: 'mcq', question: { en: "Citrobacter that we frequently isolated:" }, options: { en: ["Citrobacter amalonaticus", "Citrobacter koseri", "Citrobacter freundii", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 30, type: 'mcq', question: { en: "Pathogenecity and habitat of Citrobacter:" }, options: { en: ["Saprophytic bacteria", "nosocomial infection", "opportunistic pathogen and urinary tract infection", "all of the above"] }, answer: { en: "all of the above" } }
        ];

        let quizDataPart2 = [
            { number: 31, type: 'mcq', question: { en: "which of the following is not caracteristic of Klebsiella?" }, options: { en: ["Gram positive bacilli", "Capsulated", "Colonies mucus", "Immotile"] }, answer: { en: "Gram positive bacilli" } },
            { number: 32, type: 'mcq', question: { en: "Rhinoscleroma is frequently caused by which one of the following bacteria?" }, options: { en: ["Klebsiella pneumoniae", "Klebsiella oxytoca", "Klebsiella rhinoscleromatis", "Klebsiella ozaenae"] }, answer: { en: "Klebsiella rhinoscleromatis" } },
            { number: 33, type: 'mcq', question: { en: "Pathogenecity and habitat of Enterobacter:" }, options: { en: ["Commensal gut", "Urinary tract infection", "Bacteremia", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 34, type: 'mcq', question: { en: "All are true about Proteus , except:" }, options: { en: ["Coloni invasion of Media", "Grampositive bacilli", "Resistance to colistine", "Peritrichous flagella"] }, answer: { en: "Grampositive bacilli" } },
            { number: 35, type: 'mcq', question: { en: "Which of the following is not caracteristic of Yersinia ?" }, options: { en: ["Gram negative bacilli", "Capsulated", "not sporulated", "None motile at 37oC"] }, answer: { en: "Capsulated" } },
            { number: 36, type: 'mcq', question: { en: "Which of the following is caracteristic of Yersinia ?" }, options: { en: ["some time coccobacilli", "Capsulated", "Sporulated", "motile at 37oC"] }, answer: { en: "some time coccobacilli" } },
            { number: 37, type: 'mcq', question: { en: "Yersinia are attached to Enterobacteriaceae with:" }, options: { en: ["Oxydase negative", "Catalase positive", "Glucose fermenter", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 38, type: 'mcq', question: { en: "Yersinia are generated with three main pathogens:" }, options: { en: ["Yersinia pestis", "Yersinia enterocolitica", "Yersinia pseudotuberculosis", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 39, type: 'mcq', question: { en: "Yersinia pestis are responsible for:" }, options: { en: ["enterocolitis", "Plague", "adenolymphite mesenteric", "septicemic faorm"] }, answer: { en: "Plague" } },
            { number: 40, type: 'mcq', question: { en: "Campylobacter jejuni resist to:" }, options: { en: ["desiccation", "freezing", "cold 0-10oC", "salt"] }, answer: { en: "cold 0-10oC" } },
            { number: 41, type: 'mcq', question: { en: "Campylobacter jejuni very sentitive to:" }, options: { en: ["desiccation", "freezing", "salt", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 42, type: 'mcq', question: { en: "Yersinia is naturally resistant to:" }, options: { en: ["streptogramineB", "erythromycin", "ofloxacin", "ciprofloxacin"] }, answer: { en: "erythromycin" } },
            { number: 43, type: 'mcq', question: { en: "Which of the following is not a caracteristic of Vibrio ?" }, options: { en: ["Gram negative bacilli in curve", "Immotile", "Oxydase positive", "aero-anaerobic"] }, answer: { en: "Immotile" } },
            { number: 44, type: 'mcq', question: { en: "Which of the following is a specific media for Vibrio ?" }, options: { en: ["Chapman", "Sabouraud chloramphenicol", "TCBS", "Skirrow"] }, answer: { en: "TCBS" } },
            { number: 45, type: 'mcq', question: { en: "Vibrio is very motile with ciliature:" }, options: { en: ["monotrichous", "amphitrichous", "lophotrichous", "Peritrichous"] }, answer: { en: "monotrichous" } },
            { number: 46, type: 'mcq', question: { en: "Which of the following is not a species in family Pseudomonasceae?" }, options: { en: ["Pseudomonas", "Citrobacter", "Acinetobacter", "Burkholderia"] }, answer: { en: "Citrobacter" } },
            { number: 47, type: 'mcq', question: { en: "True about common caracteristic of Pseudomonasceae , is all, except:" }, options: { en: ["Gram negative bacilli", "aerobic strict", "fermenter glucose", "Oxydase positive"] }, answer: { en: "fermenter glucose" } },
            { number: 48, type: 'mcq', question: { en: "Which of the following is a common caracteristic of Pseudomonasceae ?" }, options: { en: ["Gram positive bacilli", "aero-anaerobic falcultative", "fermenter glucose", "none of these"] }, answer: { en: "none of these" } },
            { number: 49, type: 'mcq', question: { en: "Optimum temperature for culture Pseudomonasceae is:" }, options: { en: ["2-8oC", "25oC", "37oC", "41oC"] }, answer: { en: "37oC" } },
            { number: 50, type: 'mcq', question: { en: "Pseudomonasceae responsible for opportunistic pathogen in immunocompromised patients:" }, options: { en: ["Cancer", "Burns", "Dialysis", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 51, type: 'mcq', question: { en: "True about common caracterisric of Haemophilus , is all, except:" }, options: { en: ["Gram negative coccobacilli", "Capsulated", "Incubated in 10% CO2", "Easy grow in usual media"] }, answer: { en: "Easy grow in usual media" } },
            { number: 52, type: 'mcq', question: { en: "Which of the following media that contain both factor X and V that is required by Haemophilus ?" }, options: { en: ["Blood agar", "Chocolate agar", "Mueller Hinton", "Trypticase soy agar"] }, answer: { en: "Chocolate agar" } },
            { number: 53, type: 'mcq', question: { en: "Haemophilus influenza responsible for infection:" }, options: { en: ["Meningitis", "diarrhea", "Urinary trat infection", "digestive infection"] }, answer: { en: "Meningitis" } },
            { number: 54, type: 'mcq', question: { en: "The most common cause of meningitis in children aged 6months-2years is H.influenza serotype:" }, options: { en: ["a", "b", "c", "d"] }, answer: { en: "b" } },
            { number: 55, type: 'mcq', question: { en: "Transmission of Haemophilus influenza is from" }, options: { en: ["Human to Human", "Animal to animal", "Human to animal", "insect to human"] }, answer: { en: "Human to Human" } },
            { number: 56, type: 'mcq', question: { en: "Which of the following is a specie in family Pseudomonasceae?" }, options: { en: ["Campylobacter", "Citrobacter", "Acinetobacter", "Enterobacter"] }, answer: { en: "Acinetobacter" } },
            { number: 57, type: 'mcq', question: { en: "Habitat of Pseudomonasceae :" }, options: { en: ["Soil", "Water", "Plant dust", "all of the above"] }, answer: { en: "all of the above" } },
            { number: 58, type: 'mcq', question: { en: "Pseudomonas aeruginosa is motile with ciliature:" }, options: { en: ["monotrichous", "amphitrichous", "lophotrichous", "Peritrichous"] }, answer: { en: "monotrichous" } },
            { number: 59, type: 'mcq', question: { en: "Pseudomonascea is easy growth on:" }, options: { en: ["Specific media", "ordinary media", "selective media", "chromogen media"] }, answer: { en: "ordinary media" } },
            { number: 60, type: 'mcq', question: { en: "Which of the following Gram negative rods does not ferment glucose and is oxydase positive?" }, options: { en: ["E.coli", "P.vulgaris", "P.aeruginosa", "Salmonella"] }, answer: { en: "P.aeruginosa" } }
        ];

        let quizDataPart3 = [
            { number: 61, type: 'mcq', question: { en: "Escherichia coli that cause Shigella-like diarrhea:" }, options: { en: ["Enterotoxigenic (ETEC)", "Enteroinvasive(EIEC)", "Enteropathogenic(EPEC)", "Enterohemorrhagic(EHEC)"] }, answer: { en: "Enteroinvasive(EIEC)" } },
            { number: 62, type: 'mcq', question: { en: "Escherichia coli that cause Infantile diarrhea Salmonella-like with fever:" }, options: { en: ["Enterotoxigenic (ETEC)", "Enteroinvasive(EIEC)", "Enteropathogenic(EPEC)", "Enterohemorrhagic(EHEC)"] }, answer: { en: "Enteropathogenic(EPEC)" } },
            { number: 63, type: 'mcq', question: { en: "Escherichia coli that cause Traveller's diarrhea:" }, options: { en: ["Enterotoxigenic (ETEC)", "Enteroinvasive(EIEC)", "Enteropathogenic(EPEC)", "Enterohemorrhagic(EHEC)"] }, answer: { en: "Enterotoxigenic (ETEC)" } },
            { number: 64, type: 'mcq', question: { en: "Escherichia coli that cause Hemorrhagic colitis:" }, options: { en: ["Enterotoxigenic (ETEC)", "Enteroinvasive(EIEC)", "Enteropathogenic(EPEC)", "Enterohemorrhagic(EHEC)"] }, answer: { en: "Enterohemorrhagic(EHEC)" } },
            { number: 65, type: 'mcq', question: { en: "Disease that affects many people at different countries is termed as:" }, options: { en: ["Sporadic", "Pandemic", "Epidemic", "endemic"] }, answer: { en: "Pandemic" } },
            { number: 66, type: 'mcq', question: { en: "If the vectors transmit the infection machanically they are called:" }, options: { en: ["Biological vectors", "Mechanical vectors", "Biological Reservoir", "Both a and c"] }, answer: { en: "Mechanical vectors" } },
            { number: 67, type: 'mcq', question: { en: "If a person can be infected by direct contact with infected tissue of another person, it is termed as:" }, options: { en: ["Indirect contact transmission", "Attachment", "Direct contact transmission", "None of these"] }, answer: { en: "Direct contact transmission" } },
            { number: 68, type: 'mcq', question: { en: "The most important virulence factors are:" }, options: { en: ["Adhesions", "Invasiveness", "Toxigenicity and enzymes", "All of the above"] }, answer: { en: "All of the above" } },
            { number: 69, type: 'mcq', question: { en: "The ability of pathogen to spread in the host tissues after establishing the infection is known as:" }, options: { en: ["Adhesions", "Invasiveness", "Toxigenicity", "None of these"] }, answer: { en: "Invasiveness" } },
            { number: 70, type: 'mcq', question: { en: "Which is the following enzyme acts as a spreading factor?" }, options: { en: ["Hyaluronidase", "Coagulase", "Catalase", "Dnase"] }, answer: { en: "Hyaluronidase" } },
            { number: 71, type: 'mcq', question: { en: "Septicaemia is:" }, options: { en: ["Bacteria in blood", "Toxin in blood", "Pus in blood", "Multiplication of bacteria and toxins in blood"] }, answer: { en: "Multiplication of bacteria and toxins in blood" } },
            { number: 72, type: 'mcq', question: { en: "Name the type of diarrhea caused by V.cholerae?" }, options: { en: ["Acute watery diarrhea with blood", "Acute watery diarrhea resembling rice water", "Mild watery diarrhea with no blood", "Acute watery diarrhea with no blood"] }, answer: { en: "Acute watery diarrhea resembling rice water" } },
            { number: 73, type: 'mcq', question: { en: "Campylobacter jejuni is a microaerophilic bacteria,which of the statement is true for the culture of this bacteria?" }, options: { en: ["An atmosphere of increase O2(10%) with added CO2(5%)", "An atmosphere of reduced O2(5%) with added CO2(10%)", "An atmosphere of reduces CO2(5%) with added CO2(10%)", "An atmosphere of increase CO2(10%) with added O2(5%)"] }, answer: { en: "An atmosphere of reduced O2(5%) with added CO2(10%)" } },
            { number: 74, type: 'mcq', question: { en: "Helicobacter pylori is associated with all of the following, Except?" }, options: { en: ["Malt lymphoma", "Gastric Carcinoma", "Peptic ulcer", "Burkitt lymphoma"] }, answer: { en: "Burkitt lymphoma" } },
            { number: 75, type: 'mcq', question: { en: "Which one of the following virulence factors may be associated with the pathogenesis of infection caused by H.pylori?" }, options: { en: ["Flagella", "Lipopolysaccharides", "Exotoxins", "Endotoxins"] }, answer: { en: "Flagella" } },
            { number: 76, type: 'mcq', question: { en: "Which one of these is not the common laboratory tests for the identification of Helicobacter pylori?" }, options: { en: ["Biopsy test", "Urease breath test", "Stool antigen test", "Urine test"] }, answer: { en: "Urine test" } },
            { number: 77, type: 'mcq', question: { en: "Morphology of Helicobacter pylori is a gram negative bacilli in:" }, options: { en: ["Curve", "Spiral", "Bipolar", "Coccobacilli"] }, answer: { en: "Spiral" } },
            { number: 78, type: 'mcq', question: { en: "Morphology of Vibrio cholorea is a gram negative bacilli in:" }, options: { en: ["Curve", "Spiral", "Bipolar", "Coccobacilli"] }, answer: { en: "Curve" } },
            { number: 79, type: 'mcq', question: { en: "Morphology of Escherichia coli is a gram negative bacilli with:" }, options: { en: ["Curve", "Spiral", "Bipolar", "Coccobacilli"] }, answer: { en: "Coccobacilli" } },
            { number: 80, type: 'mcq', question: { en: "Morphology of Haemophilus influenzea is a gram negative:" }, options: { en: ["Curve", "Spiral", "Bipolar", "Coccobacilli"] }, answer: { en: "Coccobacilli" } },
            { number: 81, type: 'mcq', question: { en: "One of the following is a colony morphology of Proteus sp:" }, options: { en: ["Swarming", "Mucus", "Tiny", "Round 2-3mm"] }, answer: { en: "Swarming" } },
            { number: 82, type: 'mcq', question: { en: "One of the following is a colony morphology of E.coli:" }, options: { en: ["Swarming", "Mucus", "Tiny", "Round 2-3mm"] }, answer: { en: "Round 2-3mm" } },
            { number: 83, type: 'mcq', question: { en: "One of the following is a colony morphology of Haemophilus sp:" }, options: { en: ["Swarming", "Mucus", "Tiny", "Round 2-3mm"] }, answer: { en: "Tiny" } },
            { number: 84, type: 'mcq', question: { en: "One of the following is a colony morphology of Klebsiella sp:" }, options: { en: ["Swarming", "Mucus", "Tiny", "Round 2-3mm"] }, answer: { en: "Mucus" } },
            { number: 85, type: 'mcq', question: { en: "All of the following bacteria is motile positive except:" }, options: { en: ["E.coli", "Shigella", "Shamonella", "Citrobacter"] }, answer: { en: "Shigella" } },
            { number: 86, type: 'mcq', question: { en: "Morphological of Listeria Monocytogenes is:" }, options: { en: ["Gram + aerobic (usually anaerobic optional)", "helical bacteria to turn loose, mobile, unstained by Gram stain", "Spiral form very thin, with tight turns, mobile & aerobic", "Gram positive (small) & Aerobic-anaerobic Optional"] }, answer: { en: "Gram positive (small) & Aerobic-anaerobic Optional" } },
            { number: 87, type: 'mcq', question: { en: "Specific condition of Listeria Monocytogenes’s multiplication is:" }, options: { en: ["Multiplication at 37oC", "Multiplication at 30-35oC", "Multiplication at 4oC", "All response above"] }, answer: { en: "Multiplication at 4oC" } },
            { number: 88, type: 'mcq', question: { en: "Habitat of Listeria Monocytogenes is:" }, options: { en: ["Wet soil, water, plants & fish (often in the GI tract of animals)", "Wild rodents", "Pharynx and sometimes the skin", "Many animal species infected with Leptospira, fresh water & sludge"] }, answer: { en: "Wet soil, water, plants & fish (often in the GI tract of animals)" } },
            { number: 89, type: 'mcq', question: { en: "Listeria Monocytogenes can be transmitted to human by:" }, options: { en: ["Transmission transdermal & contamination by contact with water and mud", "Air path or nasopharyngeal secretion & direct contact", "Ingestion of contaminated food & mother-to-child transmission", "Bite of ticks (bloodsucking insects)"] }, answer: { en: "Ingestion of contaminated food & mother-to-child transmission" } },
            { number: 90, type: 'mcq', question: { en: "Listeria Monocytogenes’s contamination can be related to professional activity such as:" }, options: { en: ["Accountant & Soldier", "Police man", "Professor", "Agriculture, employment involving contact with animals & sewage"] }, answer: { en: "Agriculture, employment involving contact with animals & sewage" } }
        ];

        let quizDataPart4 = [
            { number: 91, type: 'mcq', question: { en: "Symptoms given by Listeria Monocytogenes’s infection are:" }, options: { en: ["Flu-like with febrile", "Jaundice and kidney failure è anuria", "Pseudo-membranous angina or false membranes", "All response above"] }, answer: { en: "Flu-like with febrile" } },
            { number: 92, type: 'mcq', question: { en: "Listeria Monocytogenes can infect cells such as:" }, options: { en: ["Polynucleus cell", "Phagocytosis cells", "Non phagocytosis cells and mononuclear cell (phagocytosis cell)", "All response above"] }, answer: { en: "Non phagocytosis cells and mononuclear cell (phagocytosis cell)" } },
            { number: 93, type: 'mcq', question: { en: "Sample can contain the Listeria Monocytogenes for laboratory diagnosis are:" }, options: { en: ["Skin sampling : pseudo membrane of necrotic skin", "CSF blood & placenta", "CSF blood & Urine", "All response above"] }, answer: { en: "CSF blood & placenta" } },
            { number: 94, type: 'mcq', question: { en: "Listeria Monocytogenes’s infection can be treated by:" }, options: { en: ["Penicillin Cotrimoxazole & Rifampicin", "penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin Tetracycline & generation 3rd Cephalosporin", "All response above"] }, answer: { en: "Penicillin Cotrimoxazole & Rifampicin" } },
            { number: 95, type: 'mcq', question: { en: "Morphological of Corynebacterium is:" }, options: { en: ["Gram + aerobic (usually anaerobic optional)", "helical bacteria to turn loose, mobile, unstained by Gram stain", "Spiral form very thin, with tight turns, mobile & aerobic", "Gram positive (small) & Aerobic-anaerobic Optional"] }, answer: { en: "Gram positive (small) & Aerobic-anaerobic Optional" } },
            { number: 96, type: 'mcq', question: { en: "Disease given by Corynebacterium diphteriae is:" }, options: { en: ["Lyme disease", "Diphtheria", "Tetanus", "All response above"] }, answer: { en: "Diphtheria" } },
            { number: 97, type: 'mcq', question: { en: "Habitat of Corynebacterium diphteriae is:" }, options: { en: ["Wet soil, water, plants & fish (often in the GI tract of animals)", "Wild rodents", "Pharynx and sometimes the skin", "Fresh water & sludge"] }, answer: { en: "Pharynx and sometimes the skin" } },
            { number: 98, type: 'mcq', question: { en: "Transmission path of Corynebacterium diphteriae is :" }, options: { en: ["Transmission transdermal & contamination by contact with water and mud", "Air path or nasopharyngeal secretion & direct contact", "Ingestion of contaminated food & mother-to-child transmission", "Bite of ticks (bloodsucking insects)"] }, answer: { en: "Air path or nasopharyngeal secretion & direct contact" } },
            { number: 99, type: 'mcq', question: { en: "Symptoms given by Corynebacterium diphteriae’s infection are:" }, options: { en: ["Flu-like with febrile", "Jaundice and kidney failure è anuria", "Pseudo-membranous angina or false membranes", "All response above"] }, answer: { en: "Pseudo-membranous angina or false membranes" } },
            { number: 100, type: 'mcq', question: { en: "Corynebacterium diphteriae can be identified by using:" }, options: { en: ["Culture presenting gram + (0.3-0.8μm), straight or slightly curved, 2-8μm long", "Culture presenting Cocci -", "Culture presenting bacillus -", "All response above"] }, answer: { en: "Culture presenting gram + (0.3-0.8μm), straight or slightly curved, 2-8μm long" } },
            { number: 101, type: 'mcq', question: { en: "Sample can contain the Corynebacterium diphteriae for laboratory diagnosis are:" }, options: { en: ["Skin sampling : pseudo membrane of necrotic skin", "CSF blood & placenta", "CSF blood & Urine", "All response above"] }, answer: { en: "Skin sampling : pseudo membrane of necrotic skin" } },
            { number: 102, type: 'mcq', question: { en: "Corynebacterium diphteriae’s infection can be treated by:" }, options: { en: ["Penicillin Cotrimoxazole & Rifampicin", "penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "penicillin G, Erythromycin Tetracycline & chloramphenicol" } },
            { number: 103, type: 'mcq', question: { en: "Morphological of Borrelia is:" }, options: { en: ["Gram + aerobic (usually anaerobic optional)", "helical bacteria to turn loose, mobile, unstained by Gram stain", "Spiral form very thin, with tight turns, mobile & aerobic", "Gram positive (small) & Aerobic-anaerobic Optional"] }, answer: { en: "helical bacteria to turn loose, mobile, unstained by Gram stain" } },
            { number: 104, type: 'mcq', question: { en: "Disease given by Borrelia burgdorferi is:" }, options: { en: ["Lyme disease", "Diphtheria", "Tetanus", "All response above"] }, answer: { en: "Lyme disease" } },
            { number: 105, type: 'mcq', question: { en: "Habitat of Borrelia burgdorferi is:" }, options: { en: ["Wet soil, water, plants & fish (often in the GI tract of animals)", "Wild rodents", "Pharynx and sometimes the skin", "Many animal species infected with Leptospira, fresh water & sludge"] }, answer: { en: "Wild rodents" } },
            { number: 106, type: 'mcq', question: { en: "Borrelia burgdorferi can be transmitted to human by :" }, options: { en: ["Air path or nasopharyngeal secretion & direct contact", "Ingestion of contaminated food & mother-to-child transmission", "Bite of ticks (bloodsucking insects)", "All response above"] }, answer: { en: "Bite of ticks (bloodsucking insects)" } },
            { number: 107, type: 'mcq', question: { en: "Characteristic erythema migrans (extending centrifugal) is symptom that can be observe in patient infected by:" }, options: { en: ["Borrelia burgdorferi", "Leptospira interrograns", "Mycoplasma Pneumoniae", "All response above"] }, answer: { en: "Borrelia burgdorferi" } },
            { number: 108, type: 'mcq', question: { en: "The most used method for Borrelia burgdorferi ‘s identification:" }, options: { en: ["Microscopy observe", "Bacterial culture or isolate", "Immunofluorescence", "Serology"] }, answer: { en: "Serology" } },
            { number: 109, type: 'mcq', question: { en: "Borrelia burgdorferi’s infection can be treated by:" }, options: { en: ["Penicillin Cotrimoxazole & Rifampicin", "penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "Penicillin tetracycline & generation 3rd cephalosporin" } },
            { number: 110, type: 'mcq', question: { en: "Sodoku, disease found mostly in Japan, is caused by" }, options: { en: ["Borrelia burgdorferi", "Leptospira interrograns", "Mycoplasma Pneumoniae", "Spirillum minus"] }, answer: { en: "Spirillum minus" } },
            { number: 111, type: 'mcq', question: { en: "Morphological of Leptospira is:" }, options: { en: ["Gram + aerobic (usually anaerobic optional)", "helical bacteria to turn loose, mobile, unstained by Gram stain", "Spiral form very thin, with tight turns, mobile & aerobic", "Gram positive (small) & Aerobic-anaerobic Optional"] }, answer: { en: "Spiral form very thin, with tight turns, mobile & aerobic" } },
            { number: 112, type: 'mcq', question: { en: "The pathogenic to humans of Leptospira is:" }, options: { en: ["Leptospira interrograns", "Leptospira Icterohaemorrhagiae", "Leptospira Canicola", "Leptospira Pomona"] }, answer: { en: "Leptospira interrograns" } },
            { number: 113, type: 'mcq', question: { en: "Leptospira can be found in:" }, options: { en: ["Wet soil, water, plants & fish (often in the GI tract of animals)", "Respiratory mucosa", "Pharynx and sometimes the skin", "Long persistence in fresh water and sludge (shade and 30oC place)"] }, answer: { en: "Long persistence in fresh water and sludge (shade and 30oC place)" } },
            { number: 114, type: 'mcq', question: { en: "Leptospira can be transmitted to human by :" }, options: { en: ["Air path or nasopharyngeal secretion & direct contact", "Ingestion of contaminated food & mother-to-child transmission", "Bite of ticks (bloodsucking insects)", "Contact with water & mud, Transdermal transmission"] }, answer: { en: "Contact with water & mud, Transdermal transmission" } },
            { number: 115, type: 'mcq', question: { en: "Most severe symptoms caused by Leptospira’s infection are:" }, options: { en: ["Flu-like with febrile", "Jaundice and kidney failure è anuria", "Pseudo-membranous angina or false membranes", "All response above"] }, answer: { en: "Jaundice and kidney failure è anuria" } },
            { number: 116, type: 'mcq', question: { en: "Antibiotics that are active against Leptospira are:" }, options: { en: ["Penicillin Cotrimoxazole & Rifampicin", "penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin & tetracycline", "All response above"] }, answer: { en: "Penicillin & tetracycline" } },
            { number: 117, type: 'mcq', question: { en: "Small Bacteria (about 0.1 microns in diameter) without wall &Non-colorable by Gram staining is:" }, options: { en: ["Borrelia burgdorferi", "Leptospira interrograns", "Mycoplasma Pneumoniae", "All response above"] }, answer: { en: "Mycoplasma Pneumoniae" } },
            { number: 118, type: 'mcq', question: { en: "Other Pathogenic species of Mycoplasma for human is:" }, options: { en: ["hominis & Genitalium", "Interrograns & Icterohaemorrhagiae", "Canicola & Pomona", "All reponse above"] }, answer: { en: "hominis & Genitalium" } },
            { number: 119, type: 'mcq', question: { en: "Mycoplasma can be found in:" }, options: { en: ["Wet soil, water, plants & fish (often in the GI tract of animals)", "Respiratory mucosa (in humans)", "Pharynx and sometimes the skin", "Long persistence in fresh water and sludge (shade and 30oC place)"] }, answer: { en: "Respiratory mucosa (in humans)" } },
            { number: 120, type: 'mcq', question: { en: "Leptospira can be transmitted to human by:" }, options: { en: ["Air path", "Ingestion of contaminated food & mother-to-child transmission", "Bite of ticks (bloodsucking insects)", "Contact with water & mud, Transdermal transmission"] }, answer: { en: "Contact with water & mud, Transdermal transmission" } }
        ];

        let quizDataPart5 = [
            { number: 121, type: 'mcq', question: { en: "Pharyngitis bronchitis & atypical pneumonia are symptoms caused by:" }, options: { en: ["Borrelia burgdorferi", "Leptospira interrograns", "Mycoplasma Pneumoniae", "All response above"] }, answer: { en: "Mycoplasma Pneumoniae" } },
            { number: 122, type: 'mcq', question: { en: "Sample containing the Mycoplasma Pneumoniae for laboratory diagnosis is:" }, options: { en: ["Skin sampling: pseudo membrane of necrotic skin", "CSF blood or placenta", "CSF blood or Urine", "pharyngeal secretion"] }, answer: { en: "pharyngeal secretion" } },
            { number: 123, type: 'mcq', question: { en: "Mycoplasma Pneumoniae can be identified by using:" }, options: { en: ["Genetic amplification", "Culture", "Serology (Cold agglutinins)", "All response above"] }, answer: { en: "All response above" } },
            { number: 124, type: 'mcq', question: { en: "Mycoplasma Pneumoniae’s infection can be treated by:" }, options: { en: ["Tetracycline, Macrolides & Fluoroquinolones", "penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "Tetracycline, Macrolides & Fluoroquinolones" } },
            { number: 125, type: 'mcq', question: { en: "Other Pathogenic species (M. hominis & M. Genitalium) of Mycoplasma can infect :" }, options: { en: ["Skin & mucosa", "GI tract", "Genital tract, (pelvic infection & Pyenephritis)", "All reponse above"] }, answer: { en: "Genital tract, (pelvic infection & Pyenephritis)" } },
            { number: 126, type: 'mcq', question: { en: "Pathogenic species of Chlamydia for human are:" }, options: { en: ["Trachomatis, Psittacci, pneumoniae", "Interrograns & Icterohaemorrhagiae", "Canicola & Pomona", "All reponse above"] }, answer: { en: "Trachomatis, Psittacci, pneumoniae" } },
            { number: 127, type: 'mcq', question: { en: "Chlamydia Trachomatis can be found in:" }, options: { en: ["Wet soil, water, plants & fish (often in the GI tract of animals)", "Respiratory mucosa (in humans)", "Eye & genital tract", "Pharynx and sometimes the skin"] }, answer: { en: "Eye & genital tract" } },
            { number: 128, type: 'mcq', question: { en: "Trachoma Cervicitis Urethritis Conjunctivitis or pneumonia are symptoms can be found in patients infected by:" }, options: { en: ["Leptospira interrograns", "Chlamydia Trachomatis", "Mycoplasma Pneumoniae", "All reponse above"] }, answer: { en: "Chlamydia Trachomatis" } },
            { number: 129, type: 'mcq', question: { en: "Chlamydia Trachomatis can be transmitted between human by:" }, options: { en: ["Air & Digestive path", "Ingestion of contaminated food & mother-to-child transmission", "Bite of ticks (bloodsucking insects)", "Sexual transmission & Childbirth (motherèchild)"] }, answer: { en: "Sexual transmission & Childbirth (motherèchild)" } },
            { number: 130, type: 'mcq', question: { en: "Methods used for the identification of Chlamydia trachomatis:" }, options: { en: ["Presence of inclusion in cells", "Isolation in cell culture", "Immunological method (enzymatic technique)", "All reponse above"] }, answer: { en: "All reponse above" } },
            { number: 131, type: 'mcq', question: { en: "Chlamydia trachomatis’s infection can be treated by:" }, options: { en: ["penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin tetracycline & generation 3rd cephalosporin", "Tetracycline, Macrolides Rifampicine & Fluoroquinolones", "All response above"] }, answer: { en: "Tetracycline, Macrolides Rifampicine & Fluoroquinolones" } },
            { number: 132, type: 'mcq', question: { en: "Symptom given by C. psittaci & C.pneumoniae :" }, options: { en: ["Diarrhea", "Pneumonia", "Jaundice", "All reponse above"] }, answer: { en: "Pneumonia" } },
            { number: 133, type: 'mcq', question: { en: "Pathogenic species of Clostridium for human are:" }, options: { en: ["Tetani", "Botulinum", "perfringens", "All response above"] }, answer: { en: "All response above" } },
            { number: 134, type: 'mcq', question: { en: "Clostridium tetani can be found in:" }, options: { en: ["Birds", "Respiratory mucosa (in humans)", "Soil & Non sterile surgical instrument", "Pharynx and sometimes the skin"] }, answer: { en: "Soil & Non sterile surgical instrument" } },
            { number: 135, type: 'mcq', question: { en: "Clostridium tetani can be transmitted to human by:" }, options: { en: ["Dirty wound with soil & animal bite", "Air & Digestive path", "Bite of ticks (bloodsucking insects)", "Sexual transmission (sexual infection) & Childbirth (motherèchild)"] }, answer: { en: "Dirty wound with soil & animal bite" } },
            { number: 136, type: 'mcq', question: { en: "Clostridium tetani’s infection can be diagnosed by:" }, options: { en: ["Toxin found in CNS", "Blocks transmission between inhibitory neurons and motor neurons", "Using cell culture (McCoy, HeLa 229, HL, and Hep-2)", "Clinical symptom (muscle spasm: masseter or Risus sardonicus)"] }, answer: { en: "Clinical symptom (muscle spasm: masseter or Risus sardonicus)" } },
            { number: 137, type: 'mcq', question: { en: "Clostridium tetani’s infection can be treated by:" }, options: { en: ["Chlopromazine, Diazepam & Penicillin( on wound open)", "penicillin G, Erythromycin Tetracycline & chloramphenicol", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "Chlopromazine, Diazepam & Penicillin( on wound open)" } },
            { number: 138, type: 'mcq', question: { en: "Clostridium tetani’s infection can be prevented by:" }, options: { en: ["Vaccination injection: toxin at month of 2, 4, 6 & 15 and at 4 year old", "Vaccination injection: DTaP (combined vaccine for Diphteria, Tetanus & Pertussis)", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "Vaccination injection: DTaP (combined vaccine for Diphteria, Tetanus & Pertussis)" } },
            { number: 139, type: 'mcq', question: { en: "Anthax is disease caused by :" }, options: { en: ["Borrelia burgdorferi", "Leptospira interrograns", "Mycoplasma Pneumoniae", "Bacillus anthracis"] }, answer: { en: "Bacillus anthracis" } },
            { number: 140, type: 'mcq', question: { en: "Morphological of Bacillus anthracis is:" }, options: { en: ["Gram +, obligate aerobic rod bacterium", "helical bacteria to turn loose, mobile, unstained by Gram stain", "Spiral form very thin, with tight turns, mobile & aerobic", "Gram positive (small) & Aerobic-anaerobic Optional"] }, answer: { en: "Gram +, obligate aerobic rod bacterium" } },
            { number: 141, type: 'mcq', question: { en: "Disease given by Bacillus anthracis (B. anthracis):" }, options: { en: ["Claucoma", "Anthrax", "Lyme disease", "All response above"] }, answer: { en: "Anthrax" } },
            { number: 142, type: 'mcq', question: { en: "Bacillus anthracis can be found in:" }, options: { en: ["Birds fresh water & mud", "Respiratory mucosa (in humans & fish)", "Soil & Non sterile surgical instrument", "Herbivorous & birds"] }, answer: { en: "Herbivorous & birds" } },
            { number: 143, type: 'mcq', question: { en: "Bacillus anthracis can be transmitted to human by:" }, options: { en: ["Dermal path", "Airway path", "Digestive tract path", "All response above"] }, answer: { en: "All response above" } },
            { number: 144, type: 'mcq', question: { en: "Three pathological forms given by B. anthracis’s infection are:" }, options: { en: ["Cutaneous anthrax symptoms", "Inhalation anthrax symptoms", "Gastrointestinal anthrax symptoms", "All response above"] }, answer: { en: "All response above" } },
            { number: 145, type: 'mcq', question: { en: "Fever & chills, Chest discomfort, Shortness of breath & Cough are symptoms found in patient infected by Bacillus anthracis in form of:" }, options: { en: ["Cutaneous anthrax", "Inhalation anthrax (respiratory infection)", "Gastrointestinal anthrax", "All response above"] }, answer: { en: "Inhalation anthrax (respiratory infection)" } },
            { number: 146, type: 'mcq', question: { en: "Bacillus anthracis can be identified by using microscope because of:" }, options: { en: ["its white colony type S", "its capsula with gram -", "Its long chain like bamboo cane", "All response above"] }, answer: { en: "Its long chain like bamboo cane" } },
            { number: 147, type: 'mcq', question: { en: "Bacillus anthracis’s infection can be treated by:" }, options: { en: ["Chlopromazine, Diazepam & Penicillin ( on wound open)", "Penicillin G, Tetracycline & Fluoroquinolone", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "Penicillin G, Tetracycline & Fluoroquinolone" } },
            { number: 148, type: 'mcq', question: { en: "Bacillus Gram (-), strict anaerobic & non-sporulating refer to :" }, options: { en: ["Bacteroides", "Leptospira interrograns", "Mycoplasma pneumonia", "Bacillus anthracis"] }, answer: { en: "Bacteroides" } },
            { number: 149, type: 'mcq', question: { en: "The most pathogenic species in human of Bacteroides is :" }, options: { en: ["Bacteroides of Melanogenic group", "Bacteroides intermedus", "Bacteroides Fragilis group", "Bacteroides fragilis"] }, answer: { en: "Bacteroides fragilis" } },
            { number: 150, type: 'mcq', question: { en: "Bacteroides (in human) can be found in:" }, options: { en: ["Respiratory, Gastrointestinal tract & Urine", "Natural cavities, mouth, intestines, vagina (flora Veillon)", "Any infection of the skin", "All response above"] }, answer: { en: "Natural cavities, mouth, intestines, vagina (flora Veillon)" } }
        ];

        let quizDataPart6 = [
            { number: 151, type: 'mcq', question: { en: "Transmission path of Bacteroides are:" }, options: { en: ["Transdermal cut & contamination by contact with water & mud", "Air path or nasopharyngeal secretion & direct contact", "Animal bite, Trauma & Surgical act", "Bite of ticks (bloodsucking insects)"] }, answer: { en: "Animal bite, Trauma & Surgical act" } },
            { number: 152, type: 'mcq', question: { en: "Peritonitis or abscess visceral & genital infections (Chronic vaginitis Endometritis, salpingitis) are symptoms given by infection caused by:" }, options: { en: ["Bacteroides", "Leptospira interrograns", "Mycoplasma pneumonia", "Bacillus anthracis"] }, answer: { en: "Bacteroides" } },
            { number: 153, type: 'mcq', question: { en: "Bacteroides (Fragilis group) colonies can be identified by its morphology such as:" }, options: { en: ["Circular, convex, white or greyish, transcluside or opaque with diameter: 1-3 mm", "Circular, convex, white or greyish, transcluside or opaque with diameter: 3-5 mm", "Circular, convex, Black or greyish, transcluside or opaque with diameter: 1-3 mm", "All response above"] }, answer: { en: "Circular, convex, white or greyish, transcluside or opaque with diameter: 1-3 mm" } },
            { number: 154, type: 'mcq', question: { en: "Bacteroides (melanogenic group) colonies can be identified by its morphology such as:" }, options: { en: ["Circular, convex, white or greyish, transcluside or opaque with diameter: 1-3 mm", "Circular, convex, white or greyish, transcluside or opaque with diameter: 3-5 mm", "Smooth or rough Surrounded by total hemolytic zone (hemolysis type β)", "All response above"] }, answer: { en: "Smooth or rough Surrounded by total hemolytic zone (hemolysis type β)" } },
            { number: 155, type: 'mcq', question: { en: "Bacteroides’s infection can be treated by:" }, options: { en: ["Chlopromazine, Diazepam & Penicillin (on wound open)", "Chloramphenicol, Macrolide, Limcosamide & Streptogramines", "Penicillin tetracycline & generation 3rd cephalosporin", "All response above"] }, answer: { en: "Chloramphenicol, Macrolide, Limcosamide & Streptogramines" } },
            { number: 156, type: 'mcq', question: { en: "Morphological of Mycobacterium tuberculosis is:" }, options: { en: ["Helical Gram + aerobic bacilli", "Spirochete Gram – aerobic bacilli", "Helical Gram – aerobic bacilli", "Tubercle acid-fast bacilli"] }, answer: { en: "Tubercle acid-fast bacilli" } },
            { number: 157, type: 'mcq', question: { en: "Mycobacterium tuberculosis is stained by:" }, options: { en: ["Gram stain or Ziehl-Neelsen stain", "Gram stain or Methylene blue stain", "Methylene blue stain or Ziehl-Neelsen stain", "Carbol fuchsin or Ziehl-Neelsen stain"] }, answer: { en: "Carbol fuchsin or Ziehl-Neelsen stain" } },
            { number: 158, type: 'mcq', question: { en: "Mycobacterium tuberculosis is transmitted by:" }, options: { en: ["Via contaminated food/blood/sputum", "From person to person via droplets", "From insects to person via contact or bites", "From person to person via blood and sputum"] }, answer: { en: "From person to person via droplets" } },
            { number: 159, type: 'mcq', question: { en: "Mode of transmission of Mycobacterium tuberculosis is:" }, options: { en: ["Bloodborne", "Foodborne", "Airborne", "Waterborne"] }, answer: { en: "Airborne" } },
            { number: 160, type: 'mcq', question: { en: "Symptoms given by infection with Mycobacterium tuberculosis are:" }, options: { en: ["Anemia, cough, fatigue", "Flu-like with febrile, anemia", "Weight loss, disfiguring skin sores", "Cough, weight loss, chest pain"] }, answer: { en: "Cough, weight loss, chest pain" } },
            { number: 161, type: 'mcq', question: { en: "Screening method for Mycobacterium tuberculosis’s infection is:" }, options: { en: ["Specific enzyme-linked immunospot (ELISpot) or chest radiograph", "Acid-fast bacilli (AFB) smear or sputum culture or chest radiograph", "Blood culture or nucleic acid amplification tests or chest radiograph", "Mantoux tuberculin skin test or IGRA blood test or chest radiograph"] }, answer: { en: "Mantoux tuberculin skin test or IGRA blood test or chest radiograph" } },
            { number: 162, type: 'mcq', question: { en: "Laboratory tests for suspected Mycobacterium tuberculosis’s infection is:" }, options: { en: ["Specific enzyme-linked immunospot (ELISpot)", "Acid-fast bacilli (AFB) smear or sputum culture", "Blood culture or nucleic acid amplification tests", "Mantoux tuberculin skin test or IGRA blood test"] }, answer: { en: "Acid-fast bacilli (AFB) smear or sputum culture" } },
            { number: 163, type: 'mcq', question: { en: "Sample containing Mycobacterium tuberculosis for laboratory diagnosis is:" }, options: { en: ["Blood", "Sputum", "Bone marrow", "All of the above"] }, answer: { en: "Sputum" } },
            { number: 164, type: 'mcq', question: { en: "In case of Mycobacterium tuberculosis ’s infection, susceptibility testing should be performed when:" }, options: { en: ["Positive cultures", "Positive chest radiograph", "Positive Mantoux tuberculin skin test", "Positive enzyme-linked immunospot (ELISpot)"] }, answer: { en: "Positive cultures" } },
            { number: 165, type: 'mcq', question: { en: "Susceptibility testing for Mycobacterium tuberculosis’s infection is:" }, options: { en: ["Agar dilution susceptibility testing", "Disk diffusion susceptibility testing", "Microscopic-observation drug susceptibility (MODS)", "Minimum inhibitory concentration susceptibility testing (E-Test)"] }, answer: { en: "Microscopic-observation drug susceptibility (MODS)" } },
            { number: 166, type: 'mcq', question: { en: "Mycobacterium tuberculosis ’s infection can be treated by:" }, options: { en: ["Isoniazid+Rifampin+Pyrazinamide+Ethambutol", "Isoniazid+Rifampin+Streptomycin+Ethambutol+Pyrazinamide", "Rifampin+Pyrazinamide+Ethambutol+Streptomycin+Isoniazid", "Any of the above"] }, answer: { en: "Any of the above" } },
            { number: 167, type: 'mcq', question: { en: "Disease given by Mycobacterium leprae is:" }, options: { en: ["Tetanus", "Leprosy", "Diphtheria", "Lyme disease"] }, answer: { en: "Leprosy" } },
            { number: 168, type: 'mcq', question: { en: "Morphological of Mycobacterium leprae is:" }, options: { en: ["Acid-fast bacillus", "Gram - aerobic cocci", "Gram – anaerobic bacillus", "Gram + aerobic cocci"] }, answer: { en: "Acid-fast bacillus" } },
            { number: 169, type: 'mcq', question: { en: "Mycobacterium leprae is stained by:" }, options: { en: ["Gram stain or Ziehl-Neelsen stain", "Gram stain or Methylene blue stain", "Ziehl-Neelsen Carbol fuchsin stain", "Metylene blue stain or Ziehl-Neelsen stain"] }, answer: { en: "Ziehl-Neelsen Carbol fuchsin stain" } },
            { number: 170, type: 'mcq', question: { en: "The culturing of the Mycobacterium leprae is difficult to do due to the organism is:" }, options: { en: ["Obligate aerobic", "Obligate anaerobic", "Obligate intra-cellular", "Obligate extra cellular"] }, answer: { en: "Obligate intra-cellular" } },
            { number: 171, type: 'mcq', question: { en: "Symptoms given by infection with Mycobacterium:" }, options: { en: ["Flu-like with febrile", "Anemia and fatique", "Disfiguring skin sores", "All of the above"] }, answer: { en: "Disfiguring skin sores" } },
            { number: 172, type: 'mcq', question: { en: "Infection with Mycobacterium leprae could result in the form of:" }, options: { en: ["Lepromatous", "Tuberculoid", "Both Lepromatous & Tuberculoid", "Any of the above"] }, answer: { en: "Both Lepromatous & Tuberculoid" } },
            { number: 173, type: 'mcq', question: { en: "Sample containing Mycobacterium leprae for laboratory diagnosis is:" }, options: { en: ["CSF", "Blood", "Sputum", "Skin biopsy or smear"] }, answer: { en: "Skin biopsy or smear" } },
            { number: 174, type: 'mcq', question: { en: "Mycobacterium leprae ’s infecton is usually diagnosed by:" }, options: { en: ["Clinical diagnosis", "Laboratory diagnosis", "Clinical & laboratory diagnosis", "Clinical or laboratory diagnosis"] }, answer: { en: "Clinical & laboratory diagnosis" } },
            { number: 175, type: 'mcq', question: { en: "Mycobacterium leprae ’s infecton can be treated by:" }, options: { en: ["Dapsone & rifampicin", "Dapsone & clofazimin", "Rafampicin & clofazimin", "Dapsone or rifampicin or clofazimin"] }, answer: { en: "Dapsone or rifampicin or clofazimin" } },
            { number: 176, type: 'mcq', question: { en: "Untreated infection with Mycobacterium leprae could result in permanent damage of:" }, options: { en: ["Eyes only", "Skin only", "Nerves only", "All of the above"] }, answer: { en: "All of the above" } },
            { number: 177, type: 'mcq', question: { en: "The bacterial sore throat is caused by" }, options: { en: ["Staphylococcus aureus", "Haemophilus spp", "Streptococcus pyogenes", "Mycoplasma pneumonia"] }, answer: { en: "Streptococcus pyogenes" } },
            { number: 178, type: 'mcq', question: { en: "Humans become infected with Mycobacterium tuberculosis most frequently by" }, options: { en: ["inhalation", "Ingestion", "Contact", "inoculation"] }, answer: { en: "inhalation" } }
        ];

        let quizDataPart7 = [
            { number: 179, type: 'mcq', question: { en: "Members of the genus Mycobacterium are" }, options: { en: ["gram-positive", "acid-fast", "Non-motile", "All response above"] }, answer: { en: "All response above" } },
            { number: 180, type: 'mcq', question: { en: "Löwentein-Jensen medium is used for culturing:" }, options: { en: ["Enterobacteria", "Tuberculosis", "Salmonella", "Staphylococcus"] }, answer: { en: "Tuberculosis" } },
            { number: 181, type: 'mcq', question: { en: "Infection with Neisseria gonorrhoeae is:" }, options: { en: ["Homosexuals are frequently affected with it.", "Sexual contact is the usual way of transmission.", "Pelvic inflammatory disease occurs in 10% of the infected women.", "Urethra may be affected badly."] }, answer: { en: "Sexual contact is the usual way of transmission." } },
            { number: 182, type: 'mcq', question: { en: "Drugs used against tuberculosis (TB) are" }, options: { en: ["Refampicin, Isoniazid", "Pyrazinamide, Streptomycin", "Both a and b", "None of these"] }, answer: { en: "Both a and b" } },
            { number: 183, type: 'mcq', question: { en: "In human being Streptococcus pneumoniae causes" }, options: { en: ["Septicaemia", "Paronychia", "Pneumomnia", "None of these"] }, answer: { en: "Pneumomnia" } },
            { number: 184, type: 'mcq', question: { en: "Virulence factor for Streptococcus pneumoniae" }, options: { en: ["Capsular polysaccharide", "Specific soluble substance", "Vi-antigen", "Forsmann antigen"] }, answer: { en: "Capsular polysaccharide" } },
            { number: 185, type: 'mcq', question: { en: "Causative agent of syphilis" }, options: { en: ["Treponema pallidum", "Treponema pertenue", "Treponema carateum", "Treponema endemicum"] }, answer: { en: "Treponema pallidum" } },
            { number: 186, type: 'mcq', question: { en: "Which one is the specific test for syphilis?" }, options: { en: ["GDRL test", "Frei’s", "FTA test", "Wasserman test"] }, answer: { en: "FTA test" } },
            { number: 187, type: 'mcq', question: { en: "The cogulase test is used to differentiate" }, options: { en: ["Staphylococcus epidermidis from Neisseria meningitidis", "Staphylococcus aureus from Staphylococcus epidermidis", "Streptococcus pyogens from Staphylococcus aureus", "Streptococcus pyogens from Enterococcus faecalis"] }, answer: { en: "Staphylococcus aureus from Staphylococcus epidermidis" } },
            { number: 188, type: 'mcq', question: { en: "An important characteristic of Mycobacteria is that they are:" }, options: { en: ["Gram negative", "Rapid growing (doubling time 15 minutes)", "Acid fast", "Alpha hemolytic"] }, answer: { en: "Acid fast" } },
            { number: 189, type: 'mcq', question: { en: "Symptoms of reactivation tuberculosis include:" }, options: { en: ["Weight loss", "Hypotension", "Nausea and vomiting", "Headache"] }, answer: { en: "Weight loss" } },
            { number: 190, type: 'mcq', question: { en: "Rough and buff colonies on Löwenstein–Jensen medium are characteristic of" }, options: { en: ["Mycobacterium chelonei", "Mycobacterium bovis", "Mycobacterium tuberculosis", "Mycobacterium fortuitum"] }, answer: { en: "Mycobacterium tuberculosis" } },
            { number: 191, type: 'mcq', question: { en: "Which of the following gram-positive bacteria causes pharyngitis (sore throat)?" }, options: { en: ["Neisseria", "Staphylococcus", "Streptococcus", "Mycobacterium"] }, answer: { en: "Streptococcus" } },
            { number: 192, type: 'mcq', question: { en: "Not true of Staphylococcus is that:" }, options: { en: ["It is included in the family Micrococcaceae", "It is catalase positive", "It is oxydase negative", "It is a strict anaerobie"] }, answer: { en: "It is a strict anaerobie" } },
            { number: 193, type: 'mcq', question: { en: "Which of the following is not associated with manifestation of gonococci infection?" }, options: { en: ["Vulvovaginitis", "Meningitis", "Urethritis", "Cervicitis"] }, answer: { en: "Meningitis" } },
            { number: 194, type: 'mcq', question: { en: "Which one is the specific test for syphilis?" }, options: { en: ["GDRL test", "Frei’s", "FTA test", "Wasserman test"] }, answer: { en: "FTA test" } },
            { number: 195, type: 'mcq', question: { en: "The natural reservoir of Streptococcus pyogenes is:" }, options: { en: ["Nasal cavity", "Genetic tract", "Skin", "Intestinal tract"] }, answer: { en: "Skin" } },
            { number: 196, type: 'mcq', question: { en: "Which one is not true of syphilis" }, options: { en: ["Caused by Treponema pallidum", "Secondary eruption occurs within 4-6 weeks", "Penicillin is the drug of choice for the treatment", "None of the above"] }, answer: { en: "Secondary eruption occurs within 4-6 weeks" } },
            { number: 197, type: 'mcq', question: { en: "Which of the following bacteria can cause pneumonia in man?" }, options: { en: ["Pneumococci", "Streptococci", "Staphylococci", "All response above"] }, answer: { en: "All response above" } },
            { number: 198, type: 'mcq', question: { en: "Infection with Neisseria gonorrhoeae is:" }, options: { en: ["Homosexuals are frequently affected with it.", "Sexual contact is the usual way of transmission.", "Pelvic inflammatory disease occurs in 10% of the infected women.", "Urethra may be affected badly."] }, answer: { en: "Sexual contact is the usual way of transmission." } },
            { number: 199, type: 'mcq', question: { en: "True about Enterococcus faecalis is all, except:" }, options: { en: ["It is included in the Lancefield’s D group", "It is a commensal of gastrointestinal tract", "It is sensitive to penicillins, sulphamides and streptomycin", "It causes bacterial endocarditis and bacteraemia"] }, answer: { en: "It is sensitive to penicillins, sulphamides and streptomycin" } },
            { number: 200, type: 'mcq', question: { en: "Which of the following occurs at the first stage of Meningococcal infection?" }, options: { en: ["Nasopharyngeal catarrh", "Cerebrospinal meningitis", "Septicemia and premeningitis", "Hemorrhage"] }, answer: { en: "Nasopharyngeal catarrh" } },
            { number: 201, type: 'mcq', question: { en: "Capsulated Gram positive diplococci is:" }, options: { en: ["Gonococci", "Pneumococci", "Meningococci", "Staphylococci"] }, answer: { en: "Pneumococci" } },
            { number: 202, type: 'mcq', question: { en: "Which of the following types of cells is related to delayed type tuberculin test?" }, options: { en: ["Monocytes", "B lymphocytes", "T lymphocytes", "Macrophages"] }, answer: { en: "T lymphocytes" } },
            { number: 203, type: 'mcq', question: { en: "Pneumonia in AIDS patients is frequently caused by which one of the following bacteria?" }, options: { en: ["Streptococcus pneumoniae", "Mycobacterium tuberculosis", "Klebsiella pneumonia", "None of these"] }, answer: { en: "Streptococcus pneumoniae" } }
        ];
        
        // --- End Question Data ---

        let quizData;

        let currentPart = 1;
        let quizState = {};

        // Sound Synthesis
        const correctSynth = new Tone.Synth().toDestination();
        const incorrectSynth = new Tone.Synth().toDestination();
        let audioStarted = false;

        // DOM Elements
        const part1Btn = document.getElementById('part1-btn');
        const part2Btn = document.getElementById('part2-btn');
        const part3Btn = document.getElementById('part3-btn');
        const part4Btn = document.getElementById('part4-btn');
        const part5Btn = document.getElementById('part5-btn');
        const part6Btn = document.getElementById('part6-btn');
        const part7Btn = document.getElementById('part7-btn');
        const quizView = document.getElementById('quiz-view');
        const editView = document.getElementById('edit-view');
        const practiceSheetBtn = document.getElementById('practice-sheet-btn');
        const practiceSheetView = document.getElementById('practice-sheet-view');
        const showAllBtn = document.getElementById('show-all-btn');
        const allQuestionsView = document.getElementById('all-questions-view');
        const editQuizBtn = document.getElementById('edit-quiz-btn');
        const applyPreviewBtn = document.getElementById('apply-preview-btn');
        const generateSaveCodeBtn = document.getElementById('generate-save-code-btn');
        const cancelEditBtn = document.getElementById('cancel-edit-btn');
        const addQuestionBtn = document.getElementById('add-question-btn');
        const editQuestionsContainer = document.getElementById('edit-questions-container');
        const editQuestionNavArea = document.getElementById('edit-question-navigation');
        const exportArea = document.getElementById('export-area');
        const exportOutput = document.getElementById('export-output');
        const copyFeedbackEl = document.getElementById('copy-feedback');

        const mainScoreTextEl = document.getElementById('main-score-text');
        const questionNavArea = document.getElementById('question-navigation');
        const questionArea = document.getElementById('question-area');
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const answerArea = document.getElementById('answer-area');
        const feedbackArea = document.getElementById('feedback-area');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const redoBtn = document.getElementById('redo-btn');
        const redoPartBtn = document.getElementById('redo-part-btn');
        const resultsArea = document.getElementById('results-area');
        const resultsScoreEl = document.getElementById('results-score');
        const summaryEl = document.getElementById('summary');
        const restartBtn = document.getElementById('restart-btn');

        let isAnswered = false;

        async function startAudio() {
            if (!audioStarted) {
                await Tone.start();
                audioStarted = true;
            }
        }
        
        function switchPart(part) {
            currentPart = part;

            part1Btn.classList.remove('bg-indigo-600', 'text-white');
            part1Btn.classList.add('bg-white', 'text-gray-900');
            part2Btn.classList.remove('bg-indigo-600', 'text-white');
            part2Btn.classList.add('bg-white', 'text-gray-900');
            part3Btn.classList.remove('bg-indigo-600', 'text-white');
            part3Btn.classList.add('bg-white', 'text-gray-900');
            part4Btn.classList.remove('bg-indigo-600', 'text-white');
            part4Btn.classList.add('bg-white', 'text-gray-900');
            part5Btn.classList.remove('bg-indigo-600', 'text-white');
            part5Btn.classList.add('bg-white', 'text-gray-900');
            part6Btn.classList.remove('bg-indigo-600', 'text-white');
            part6Btn.classList.add('bg-white', 'text-gray-900');
            part7Btn.classList.remove('bg-indigo-600', 'text-white');
            part7Btn.classList.add('bg-white', 'text-gray-900');
            
            let targetBtn;
            if (part === 1) {
                quizData = quizDataPart1;
                targetBtn = part1Btn;
            } else if (part === 2){
                quizData = quizDataPart2;
                targetBtn = part2Btn;
            } else if (part === 3){
                quizData = quizDataPart3;
                targetBtn = part3Btn;
            } else if (part === 4){
                quizData = quizDataPart4;
                targetBtn = part4Btn;
            } else if (part === 5){
                quizData = quizDataPart5;
                targetBtn = part5Btn;
            } else if (part === 6){
                quizData = quizDataPart6;
                targetBtn = part6Btn;
            } else {
                quizData = quizDataPart7;
                targetBtn = part7Btn;
            }
            
            targetBtn.classList.add('bg-indigo-600', 'text-white');
            targetBtn.classList.remove('bg-white', 'text-gray-900');
            
            document.getElementById('quiz-subtitle').textContent = `Subject: Microbiology ( ${quizData.length} questions)`;
            loadQuizView();
        }

        function updateScoreText() {
            mainScoreTextEl.innerHTML = `Score: ${quizState[currentPart].score} / ${quizData.length}`;
        }

        function startQuiz() {
            initializeQuiz();
        }
        
        function initializeQuiz() {
            quizState = {
                1: { userAnswers: [], score: 0, currentQuestionIndex: 0 },
                2: { userAnswers: [], score: 0, currentQuestionIndex: 0 },
                3: { userAnswers: [], score: 0, currentQuestionIndex: 0 },
                4: { userAnswers: [], score: 0, currentQuestionIndex: 0 },
                5: { userAnswers: [], score: 0, currentQuestionIndex: 0 },
                6: { userAnswers: [], score: 0, currentQuestionIndex: 0 },
                7: { userAnswers: [], score: 0, currentQuestionIndex: 0 }
            };
            currentPart = 1;
            switchPart(1); 
        }
        
        function loadQuizView() {
            quizView.classList.remove('hidden');
            editView.classList.add('hidden');
            practiceSheetView.classList.add('hidden');
            allQuestionsView.classList.add('hidden');
            
            questionNavArea.classList.remove('hidden');
            questionArea.classList.remove('hidden');
            answerArea.classList.remove('hidden');
            resultsArea.classList.add('hidden');

            renderQuestionButtons();
            showQuestion();
            updateScoreText();
        }

        function renderQuestionButtons() {
            questionNavArea.innerHTML = '';
            quizData.forEach((question, index) => {
                const button = document.createElement('button');
                button.textContent = question.number;
                button.classList.add('question-nav-btn', 'border-2', 'border-gray-300', 'rounded-md');
                button.addEventListener('click', () => {
                    quizState[currentPart].currentQuestionIndex = index;
                    showQuestion();
                });
                questionNavArea.appendChild(button);
            });
        }
        
        function updateQuestionButtonStyles() {
            const buttons = Array.from(questionNavArea.children);
            buttons.forEach((button, index) => {
                button.classList.remove('active', 'answered-correct', 'answered-incorrect');
                if (quizState[currentPart].userAnswers[index]) {
                    if(quizState[currentPart].userAnswers[index].isCorrect) {
                        button.classList.add('answered-correct');
                    } else {
                        button.classList.add('answered-incorrect');
                    }
                }
            });
            const currentQuestionIndex = quizState[currentPart].currentQuestionIndex;
            if(buttons[currentQuestionIndex]) {
                buttons[currentQuestionIndex].classList.add('active');
            }
        }

        function showQuestion() {
            resetState();
            if (quizData.length === 0) {
                questionTextEl.innerHTML = "No questions in this part.";
                questionNavArea.innerHTML = '';
                answerArea.innerHTML = '';
                nextBtn.classList.add('hidden');
                prevBtn.classList.add('hidden');
                questionNumberEl.innerHTML = `Question 0/0`;
                return;
            }
            const currentQuestionIndex = quizState[currentPart].currentQuestionIndex;
            const userAnswers = quizState[currentPart].userAnswers;
            const currentQuestion = quizData[currentQuestionIndex];
            isAnswered = userAnswers[currentQuestionIndex] !== undefined;

            if (isAnswered) {
                redoBtn.classList.remove('hidden');
            }

            questionNumberEl.innerHTML = `Question ${currentQuestion.number}/${quizData.length}`;
            questionTextEl.innerHTML = `${currentQuestion.question.en}`;
            
            if (currentQuestion.type === 'mcq') {
                answerArea.className = 'grid grid-cols-1 md:grid-cols-2 gap-4';
                currentQuestion.options.en.forEach((optionEn) => {
                    const button = document.createElement('button');
                    button.innerHTML = `<span>${optionEn}</span>`;
                    button.classList.add('option-btn', 'w-full', 'p-4', 'border-2', 'border-gray-300', 'rounded-lg', 'text-left', 'hover:bg-gray-100');
                    button.addEventListener('click', () => selectAnswer(button, optionEn, currentQuestionIndex, answerArea, feedbackArea));

                    if(isAnswered) {
                        button.disabled = true;
                        const userAnswerData = userAnswers[currentQuestionIndex];
                        const correctAnswerEn = currentQuestion.answer.en;
                        if (optionEn.trim() === correctAnswerEn.trim()){
                            button.classList.add('correct');
                        }
                        if (optionEn.trim() === userAnswerData.answer.trim() && !userAnswerData.isCorrect){
                            button.classList.add('incorrect');
                        }
                    }
                    answerArea.appendChild(button);
                });
            } else if (currentQuestion.type === 'fill-in') {
                answerArea.className = 'flex flex-col items-center gap-4 mt-4';
                const input = document.createElement('input');
                input.type = 'text';
                input.id = 'fill-in-input';
                input.className = 'w-full max-w-lg p-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500';
                input.placeholder = 'Type your answer here...';

                const submitBtn = document.createElement('button');
                submitBtn.textContent = 'Submit Answer';
                submitBtn.className = 'bg-indigo-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-600 transition-colors duration-300 shadow-md';
                submitBtn.addEventListener('click', () => checkFillInAnswer(input, currentQuestionIndex, answerArea, feedbackArea));

                answerArea.appendChild(input);
                answerArea.appendChild(submitBtn);

                if (isAnswered) {
                    const userAnswerData = userAnswers[currentQuestionIndex];
                    input.value = userAnswerData.answer;
                    input.disabled = true;
                    submitBtn.disabled = true;
                    input.classList.add(userAnswerData.isCorrect ? 'correct' : 'incorrect');
                    if (!userAnswerData.isCorrect) {
                        feedbackArea.innerHTML = `Wrong! The correct answer is: ${currentQuestion.answer.en}`;
                        feedbackArea.className = 'mt-2 text-center text-md font-medium text-red-600';
                    } else {
                         feedbackArea.innerHTML = `Correct!`;
                         feedbackArea.className = 'mt-2 text-center text-md font-medium text-green-600';
                    }
                }
            }
            updateQuestionButtonStyles();
            updateButtonVisibility();
        }
        
        function resetState() {
            feedbackArea.textContent = '';
            answerArea.innerHTML = '';
            redoBtn.classList.add('hidden');
        }

        function updateButtonVisibility() {
            const currentQuestionIndex = quizState[currentPart].currentQuestionIndex;
            prevBtn.classList.toggle('hidden', currentQuestionIndex === 0);
            const allAnswered = quizState[currentPart].userAnswers.filter(Boolean).length === quizData.length;
            nextBtn.classList.toggle('hidden', allAnswered);

            if (currentQuestionIndex === quizData.length - 1 || allAnswered) {
                 nextBtn.innerHTML = `<span class="font-semibold">Show Results</span>`;
            } else {
                 nextBtn.innerHTML = `<span class="font-semibold">Next Question</span>`;
            }
        }
        
        async function checkFillInAnswer(inputElement, questionIndex, container, feedbackEl) {
             await startAudio();
            if (quizState[currentPart].userAnswers[questionIndex]) return;

            const userAnswer = inputElement.value;
            const currentQuestion = quizData[questionIndex];
            const isCorrect = userAnswer.trim().toLowerCase() === currentQuestion.answer.en.trim().toLowerCase();

            inputElement.disabled = true;
            container.querySelector('button').disabled = true;

            if (isCorrect) {
                quizState[currentPart].score++;
                correctSynth.triggerAttackRelease("C5", "8n", Tone.now());
                inputElement.classList.add('correct');
                 if (feedbackEl) {
                    feedbackEl.innerHTML = `Correct!`;
                    feedbackEl.className = 'mt-2 text-center text-md font-medium text-green-600 practice-feedback';
                }
            } else {
                const now = Tone.now();
                incorrectSynth.triggerAttackRelease("G3", "16n", now);
                incorrectSynth.triggerAttackRelease("F#3", "8n", now + 0.1);
                inputElement.classList.add('incorrect');
                 if (feedbackEl) {
                    feedbackEl.innerHTML = `Wrong! The correct answer is: <strong>${currentQuestion.answer.en}</strong>`;
                    feedbackEl.className = 'mt-2 text-center text-md font-medium text-red-600 practice-feedback';
                }
            }

            quizState[currentPart].userAnswers[questionIndex] = { isCorrect, answer: userAnswer };
            
            if (!practiceSheetView.classList.contains('hidden')) {
                const practiceRedoBtn = document.getElementById(`ps-redo-btn-${questionIndex}`);
                if (practiceRedoBtn) practiceRedoBtn.classList.remove('hidden');
            } else {
                redoBtn.classList.remove('hidden');
            }

            updateScoreText();
            updateQuestionButtonStyles();
            updateButtonVisibility();
        }


        async function selectAnswer(button, selectedOptionEn, questionIndex, container, feedbackEl) {
            await startAudio();
            if (quizState[currentPart].userAnswers[questionIndex]) return;
            
            const allButtons = container.querySelectorAll('button');
            allButtons.forEach(btn => { btn.disabled = true; });

            const currentQuestion = quizData[questionIndex];
            const isCorrect = selectedOptionEn.trim() === currentQuestion.answer.en.trim();
            
            if (isCorrect) {
                quizState[currentPart].score++;
                correctSynth.triggerAttackRelease("C5", "8n", Tone.now());
                button.classList.add('correct');
                if (feedbackEl) {
                    feedbackEl.innerHTML = `Correct!`;
                    feedbackEl.className = 'mt-2 text-center text-md font-medium text-green-600 practice-feedback';
                }
            } else {
                const now = Tone.now();
                incorrectSynth.triggerAttackRelease("G3", "16n", now);
                incorrectSynth.triggerAttackRelease("F#3", "8n", now + 0.1);
                button.classList.add('incorrect');
                 if (feedbackEl) {
                    feedbackEl.innerHTML = `Wrong! The correct answer is: ${currentQuestion.answer.en}`;
                    feedbackEl.className = 'mt-2 text-center text-md font-medium text-red-600 practice-feedback';
                }
                allButtons.forEach(btn => {
                    if (btn.children[0].textContent.trim() === currentQuestion.answer.en.trim()) {
                        btn.classList.add('correct');
                    }
                });
            }
            
            quizState[currentPart].userAnswers[questionIndex] = { isCorrect, answer: selectedOptionEn };

            if (!practiceSheetView.classList.contains('hidden')) {
                const practiceRedoBtn = document.getElementById(`ps-redo-btn-${questionIndex}`);
                if (practiceRedoBtn) practiceRedoBtn.classList.remove('hidden');
            } else {
                redoBtn.classList.remove('hidden');
            }

            updateScoreText();
            updateQuestionButtonStyles();
            updateButtonVisibility();
        }
        
        function togglePracticeSheetView() {
            quizView.classList.toggle('hidden');
            practiceSheetView.classList.toggle('hidden');
            allQuestionsView.classList.add('hidden');

            if (!practiceSheetView.classList.contains('hidden')) {
                renderPracticeSheet();
                practiceSheetBtn.textContent = 'Back to Quiz';
            } else {
                practiceSheetBtn.textContent = 'Practice Sheet';
                loadQuizView(); // Reload single question view to reflect any changes
            }
        }

        function toggleAllQuestionsView() {
            quizView.classList.toggle('hidden');
            allQuestionsView.classList.toggle('hidden');
            practiceSheetView.classList.add('hidden');

            if (!allQuestionsView.classList.contains('hidden')) {
                renderAllQuestions();
                showAllBtn.textContent = 'Back to Quiz';
            } else {
                showAllBtn.textContent = 'Show Answers';
            }
        }

        function renderAllQuestions() {
            allQuestionsView.innerHTML = ''; // Clear previous content

            const title = document.createElement('h2');
            title.className = 'text-3xl font-bold text-center mb-6 text-gray-800';
            title.textContent = `All Questions & Answers - Part ${currentPart}`;
            allQuestionsView.appendChild(title);

            quizData.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'mb-6 p-4 border rounded-lg bg-gray-50';

                let contentHTML = `<p class="font-bold text-lg mb-2">${q.number}. ${q.question.en}</p>`;

                if (q.type === 'mcq') {
                    contentHTML += '<ul class="list-disc list-inside space-y-1">';
                    q.options.en.forEach(option => {
                        const isCorrect = option.trim() === q.answer.en.trim();
                        contentHTML += `<li class="${isCorrect ? 'text-green-700 font-semibold' : 'text-gray-700'}">${option}${isCorrect ? ' &check;' : ''}</li>`;
                    });
                    contentHTML += '</ul>';
                } else if (q.type === 'fill-in') {
                     contentHTML += `<p class="text-green-700 font-semibold">Answer: ${q.answer.en}</p>`;
                }
                questionDiv.innerHTML = contentHTML;
                allQuestionsView.appendChild(questionDiv);
            });
            
            const backBtn = document.createElement('button');
            backBtn.className = 'mt-8 bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-lg block mx-auto';
            backBtn.innerHTML = '<span class="font-semibold">Back to Quiz</span>';
            backBtn.addEventListener('click', toggleAllQuestionsView);
            allQuestionsView.appendChild(backBtn);
        }

        function renderPracticeSheet() {
            practiceSheetView.innerHTML = ''; 
            const title = document.createElement('h2');
            title.className = 'text-3xl font-bold text-center mb-6 text-gray-800';
            title.textContent = `Practice Sheet - Part ${currentPart}`;
            practiceSheetView.appendChild(title);

            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.id = `ps-question-${index}`;
                questionDiv.className = 'mb-6 p-4 border rounded-lg bg-gray-50';
                
                const questionHeader = document.createElement('div');
                questionHeader.className = 'flex justify-between items-start';
                
                const questionTitle = document.createElement('p');
                questionTitle.className = 'font-bold text-lg mb-2 flex-grow';
                questionTitle.innerHTML = `${q.number}. ${q.question.en}`;
                
                const redoBtn = document.createElement('button');
                redoBtn.id = `ps-redo-btn-${index}`;
                redoBtn.textContent = 'Redo';
                redoBtn.className = 'hidden bg-yellow-500 text-white font-bold py-1 px-4 rounded-lg hover:bg-yellow-600 text-sm';
                redoBtn.addEventListener('click', () => redoPracticeSheetQuestion(index));
                
                questionHeader.appendChild(questionTitle);
                questionHeader.appendChild(redoBtn);

                const answersContainer = document.createElement('div');
                const feedbackEl = document.createElement('div');
                feedbackEl.className = 'practice-feedback';

                questionDiv.appendChild(questionHeader);

                if (q.type === 'mcq') {
                    answersContainer.className = 'grid grid-cols-1 md:grid-cols-2 gap-3 mt-4';
                    q.options.en.forEach(optionEn => {
                        const button = document.createElement('button');
                        button.innerHTML = `<span>${optionEn}</span>`;
                        button.className = 'option-btn w-full p-3 border-2 border-gray-300 rounded-lg text-left hover:bg-gray-100';
                        button.addEventListener('click', () => selectAnswer(button, optionEn, index, answersContainer, feedbackEl));
                        answersContainer.appendChild(button);
                    });
                } else if (q.type === 'fill-in') {
                    answersContainer.className = 'flex flex-col items-start gap-3 mt-4';
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'w-full max-w-md p-2 border-2 border-gray-300 rounded-lg';
                    const submitBtn = document.createElement('button');
                    submitBtn.textContent = 'Submit';
                    submitBtn.className = 'bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-600 text-sm';
                    submitBtn.addEventListener('click', () => checkFillInAnswer(input, index, answersContainer, feedbackEl));
                    answersContainer.appendChild(input);
                    answersContainer.appendChild(submitBtn);
                }

                questionDiv.appendChild(answersContainer);
                questionDiv.appendChild(feedbackEl);
                practiceSheetView.appendChild(questionDiv);


                if (quizState[currentPart].userAnswers[index]) {
                    redoBtn.classList.remove('hidden');
                    const userAnswerData = quizState[currentPart].userAnswers[index];
                    if (q.type === 'mcq') {
                        Array.from(answersContainer.children).forEach(button => {
                            button.disabled = true;
                            const optionText = button.textContent.trim();
                             if (optionText === q.answer.en.trim()) button.classList.add('correct');
                             if (optionText === userAnswerData.answer.trim() && !userAnswerData.isCorrect) button.classList.add('incorrect');
                        });
                    } else if (q.type === 'fill-in') {
                        const input = answersContainer.querySelector('input');
                        const submit = answersContainer.querySelector('button');
                        input.value = userAnswerData.answer;
                        input.disabled = true;
                        submit.disabled = true;
                        input.classList.add(userAnswerData.isCorrect ? 'correct' : 'incorrect');
                    }
                }
            });
            
            const backBtn = document.createElement('button');
            backBtn.className = 'mt-8 bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-lg block mx-auto';
            backBtn.innerHTML = '<span class="font-semibold">Back to Quiz</span>';
            backBtn.addEventListener('click', togglePracticeSheetView);
            practiceSheetView.appendChild(backBtn);
        }

        function redoPracticeSheetQuestion(questionIndex) {
            const answerData = quizState[currentPart].userAnswers[questionIndex];
            if (!answerData) return;

            if (answerData.isCorrect) {
                quizState[currentPart].score--;
            }

            quizState[currentPart].userAnswers[questionIndex] = undefined;
            updateScoreText();
            updateQuestionButtonStyles();

            const questionContainer = document.getElementById(`ps-question-${questionIndex}`);
            if (!questionContainer) return;

            const question = quizData[questionIndex];
            
            if (question.type === 'mcq') {
                const buttons = questionContainer.querySelectorAll('button.option-btn');
                buttons.forEach(btn => {
                    btn.disabled = false;
                    btn.classList.remove('correct', 'incorrect');
                });
            } else if (question.type === 'fill-in') {
                const input = questionContainer.querySelector('input');
                const submit = questionContainer.querySelector('button');
                input.disabled = false;
                submit.disabled = false;
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            }

            const feedbackEl = questionContainer.querySelector('.practice-feedback');
            if (feedbackEl) feedbackEl.innerHTML = '';
            
            const redoButton = document.getElementById(`ps-redo-btn-${questionIndex}`);
            if (redoButton) redoButton.classList.add('hidden');
        }


        function showResults() {
            questionNavArea.classList.add('hidden');
            questionArea.classList.add('hidden');
            answerArea.classList.add('hidden');
            nextBtn.classList.add('hidden');
            prevBtn.classList.add('hidden');
            redoBtn.classList.add('hidden');
            feedbackArea.textContent = '';
            resultsArea.classList.remove('hidden');
            resultsScoreEl.innerHTML = `Your final score is ${quizState[currentPart].score} out of ${quizData.length}.`;
            summaryEl.innerHTML = `<div class="text-center mb-4"><h3 class="text-xl font-bold text-gray-700">Review Your Answers:</h3></div>`; 
            
            quizState[currentPart].userAnswers.forEach((ua, index) => {
                if (!ua) return;
                const qData = quizData[index];
                const resultDiv = document.createElement('div');
                resultDiv.classList.add('mb-4', 'p-3', 'rounded-md', ua.isCorrect ? 'bg-blue-100' : 'bg-red-100');
                
                const correctAnswerText = !ua.isCorrect ? `Correct answer: ${qData.answer.en}` : '';
                resultDiv.innerHTML = `
                    <p class="font-semibold">${qData.number}. ${qData.question.en}</p>
                    <p class="text-sm ${ua.isCorrect ? 'text-blue-700' : 'text-red-700'}">Your answer: ${ua.answer}</p>
                    <p class="text-sm text-gray-600">${correctAnswerText}</p>`;
                
                summaryEl.appendChild(resultDiv);
            });
        }
        
        function redoQuestion() {
            const currentQuestionIndex = quizState[currentPart].currentQuestionIndex;
            const answerData = quizState[currentPart].userAnswers[currentQuestionIndex];
            if (!answerData) return;

            if (answerData.isCorrect) {
                quizState[currentPart].score--;
            }
            quizState[currentPart].userAnswers[currentQuestionIndex] = undefined;
            
            updateScoreText();
            showQuestion();
        }

        function redoPart() {
            quizState[currentPart] = { userAnswers: [], score: 0, currentQuestionIndex: 0 };
            loadQuizView();
        }

        // --- EDIT MODE FUNCTIONS (Simplified for brevity) ---
        
        function toggleEditMode() {
            quizView.classList.toggle('hidden');
            editView.classList.toggle('hidden');
            practiceSheetView.classList.add('hidden');
            allQuestionsView.classList.add('hidden');
            if (!editView.classList.contains('hidden')) {
                renderEditView();
            }
            exportArea.classList.add('hidden');
        }

        function renderEditView() {
            editQuestionsContainer.innerHTML = '';
            editQuestionNavArea.innerHTML = '';
            quizData.forEach((q, index) => {
                const navButton = document.createElement('button');
                navButton.textContent = q.number;
                navButton.className = 'question-nav-btn border-2 border-gray-300 rounded-md';
                navButton.addEventListener('click', () => document.getElementById(`edit-q-${index}`).scrollIntoView({ behavior: 'smooth' }));
                editQuestionNavArea.appendChild(navButton);
                
                const qDiv = document.createElement('div');
                qDiv.id = `edit-q-${index}`;
                qDiv.className = 'border p-4 rounded-lg mb-4 bg-gray-50 scroll-mt-4';
                const correctAnserIndex = q.type === 'mcq' ? q.options.en.map(o => o.trim()).indexOf(q.answer.en.trim()) : -1;

                qDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <p class="font-bold text-lg">Question ${q.number}</p>
                        <button class="delete-question-btn bg-red-500 text-white font-bold py-1 px-3 rounded hover:bg-red-600" data-index="${index}">Delete</button>
                    </div>
                    <label class="edit-label">Question (English)</label>
                    <textarea class="edit-input question-en">${q.type === 'mcq' ? q.question.en : q.title}</textarea>
                    <div class="options-container mt-4">
                    ${q.type === 'mcq' ?
                        q.options.en.map((optEn, optIndex) => `
                            <div class="flex items-center gap-2 mb-2">
                                <input type="radio" name="correct-answer-${index}" ${optIndex === correctAnserIndex ? 'checked' : ''}>
                                <input type="text" class="edit-input option-en" value="${optEn}">
                            </div>
                        `).join('') : ''
                    }
                    </div>
                `;
                editQuestionsContainer.appendChild(qDiv);
            });

            document.querySelectorAll('.delete-question-btn').forEach(btn => btn.addEventListener('click', (e) => {
                quizData.splice(parseInt(e.target.dataset.index, 10), 1);
                renderEditView();
            }));
        }

        function getEditedData() {
            const newQuizData = [];
            editQuestionsContainer.querySelectorAll('.border').forEach((form, index) => {
                const q = { number: index + 1, type: 'mcq', question: { en: form.querySelector('.question-en').value } };
                const optInputs = Array.from(form.querySelectorAll('.option-en'));
                const radios = Array.from(form.querySelectorAll('input[type="radio"]'));
                q.options = { en: optInputs.map(input => input.value) };
                q.answer = { en: q.options.en[radios.findIndex(r => r.checked)] };
                newQuizData.push(q);
            });
            return newQuizData;
        }

        function applyToPreview() {
            const editedData = getEditedData();
            if (currentPart === 1) quizDataPart1 = editedData;
            else if (currentPart === 2) quizDataPart2 = editedData;
            else if (currentPart === 3) quizDataPart3 = editedData;
            else if (currentPart === 4) quizDataPart4 = editedData;
            else if (currentPart === 5) quizDataPart5 = editedData;
            else if (currentPart === 6) quizDataPart6 = editedData;
            else quizDataPart7 = editedData;
            quizData = editedData;
            toggleEditMode();
            initializeQuiz();
        }

        function generateSaveCode() {
            const data = getEditedData();
            const varName = `quizDataPart${currentPart}`;
            exportOutput.value = `let ${varName} = ${JSON.stringify(data, null, 4)};`;
            exportArea.classList.remove('hidden');
        }

        // Event Listeners
        part1Btn.addEventListener('click', () => switchPart(1));
        part2Btn.addEventListener('click', () => switchPart(2));
        part3Btn.addEventListener('click', () => switchPart(3));
        part4Btn.addEventListener('click', () => switchPart(4));
        part5Btn.addEventListener('click', () => switchPart(5));
        part6Btn.addEventListener('click', () => switchPart(6));
        part7Btn.addEventListener('click', () => switchPart(7));
        practiceSheetBtn.addEventListener('click', togglePracticeSheetView);
        showAllBtn.addEventListener('click', toggleAllQuestionsView);
        
        prevBtn.addEventListener('click', () => {
            if (quizState[currentPart].currentQuestionIndex > 0) {
                quizState[currentPart].currentQuestionIndex--;
                showQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            const allAnswered = quizState[currentPart].userAnswers.filter(Boolean).length === quizData.length;
            if (quizState[currentPart].currentQuestionIndex < quizData.length - 1 && !allAnswered) {
                quizState[currentPart].currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        });
        
        restartBtn.addEventListener('click', startQuiz);
        redoBtn.addEventListener('click', redoQuestion);
        redoPartBtn.addEventListener('click', redoPart);
        editQuizBtn.addEventListener('click', toggleEditMode);
        applyPreviewBtn.addEventListener('click', applyToPreview);
        generateSaveCodeBtn.addEventListener('click', generateSaveCode);
        cancelEditBtn.addEventListener('click', toggleEditMode);
        addQuestionBtn.addEventListener('click', () => {
            quizData.push({ number: quizData.length + 1, type: 'mcq', question: { en: "New Question" }, options: { en: ["A", "B", "C", "D"] }, answer: { en: "A" } });
            renderEditView();
        });
        exportOutput.addEventListener('click', () => {
            exportOutput.select();
            document.execCommand('copy');
            copyFeedbackEl.textContent = 'Code copied!';
            setTimeout(() => { copyFeedbackEl.textContent = '' }, 2000);
        });

        window.addEventListener('beforeunload', e => {
            e.preventDefault();
            e.returnValue = '';
        });

        // Initial start
        initializeQuiz();
    </script>
</body>
</html>
